{"version":3,"sources":["components/Button.js","components/Message.js","components/Channel.js","App.js","index.js"],"names":["Button","onClick","children","className","Message","CreatedAt","text","displayName","photoURL","src","alt","width","height","seconds","formatRelative","Date","Channel","user","db","useState","messages","setmessages","newMessage","setnewMessage","uid","useEffect","collection","orderBy","limit","onSnapshot","querySnapshot","data","docs","map","doc","id","message","onSubmit","e","preventDefault","add","firebase","firestore","FieldValue","serverTimestamp","value","onChange","target","placeholder","type","disabled","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","App","currentUser","setuser","initializing","setinitializing","onAuthStateChanged","signInWithGoogle","a","provider","GoogleAuthProvider","useDeviceLanguage","signInWithPopup","console","log","signInWithGithub","GithubAuthProvider","signInWithFacebook","FacebookAuthProvider","signOut","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6fba6f14.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Button = ({ onClick= null, children = null}) => (\r\n    <button className=\"py-2 px-4 font-semibold rounded-lg shadow-md text-white bg-green-500 hover:bg-green-700 motion-reduce:transform-none\" onClick={onClick}>{children}</button>\r\n)\r\n\r\nexport default Button\r\n","import React from 'react'\r\nimport { formatRelative } from 'date-fns';\r\n\r\nexport const Message = ({CreatedAt = null, text = '', displayName= '', photoURL = ''}) => {\r\n    return (\r\n        <div>\r\n            {\r\n                photoURL\r\n                ?\r\n                <img src={photoURL} alt=\"Avatar\" width={45} height={45} />\r\n                : \r\n                null\r\n            }\r\n            {\r\n                displayName\r\n                ?\r\n                <p>{displayName}</p>\r\n                :\r\n                null\r\n            }\r\n            {\r\n                CreatedAt?.seconds\r\n                ?\r\n                (\r\n                    <span>{formatRelative(new Date(CreatedAt.seconds * 1000), new Date())}</span>\r\n                )\r\n                :\r\n                null\r\n            }\r\n            <p>{text}</p>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport firebase from 'firebase/app';\r\nimport { Message } from './Message';\r\n\r\nconst Channel = ({user=null, db=null}) => {\r\n    const [messages, setmessages] = useState([]);\r\n    const [newMessage, setnewMessage] = useState('');\r\n    const { uid, displayName, photoURL }= user;\r\n    useEffect(() => {\r\n        if( db ){\r\n            const unsuscribe = db\r\n                .collection('messages')\r\n                .orderBy('CreatedAt')\r\n                .limit(100)\r\n                .onSnapshot(querySnapshot => {\r\n                                    const data = querySnapshot.docs.map(doc => ({\r\n                                        ...doc.data(),\r\n                                        id: doc.id,\r\n                                    }))\r\n\r\n                                    setmessages(data);\r\n                                });\r\n                return unsuscribe\r\n        }\r\n    }, [db]);\r\n\r\n    const handleOnChange = (e) => {\r\n        setnewMessage(e.target.value);\r\n        \r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n\r\n        if( db ){\r\n            db.collection('messages').add({\r\n\r\n                text: newMessage,\r\n                CreatedAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n                uid,\r\n                displayName,\r\n                photoURL\r\n            }\r\n            )\r\n        }\r\n\r\n        setnewMessage('');\r\n    }\r\n\r\n    return (\r\n    <>\r\n        <div className=\"flex flex-col h-full\">\r\n            <ul>\r\n                {messages.map( message => (\r\n                    <li key={message.id}><Message {...message} /></li>\r\n                ))}\r\n            </ul>\r\n            <div className=\"mb-6 mx-4\">\r\n                <form\r\n                className=\"flex flex-row bg-gray-200 dark:bg-coolDark-400 rounded-md px-4 py-3 z-10 max-w-screen-lg mx-auto dark:text-white shadow-md\"\r\n                onSubmit={ handleSubmit }>\r\n                    <input\r\n                        className=\"flex-1 bg-transparent outline-none\"\r\n                        value={newMessage}\r\n                        onChange={handleOnChange}\r\n                        placeholder=\"Escribe aquí tu mensaje\"\r\n                    />\r\n\r\n                    <button className=\"uppercase font-semibold text-sm tracking-wider text-gray-500 hover:text-gray-900 dark:hover:text-white transition-colors\" type=\"submit\" disabled={!newMessage}>Enviar</button>\r\n\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </>\r\n    );\r\n}\r\n\r\nexport default Channel;\r\n","import React, { Fragment, useEffect, useState } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport Button from './components/Button';\nimport './index.css';\nimport  Channel  from './components/Channel';\n\nfirebase.initializeApp({\n    apiKey: \"AIzaSyAX_zpDqGSxQnLWGRdCKMk8AM_XSbqOF5o\",\n    authDomain: \"chat-react-edc32.firebaseapp.com\",\n    projectId: \"chat-react-edc32\",\n    storageBucket: \"chat-react-edc32.appspot.com\",\n    messagingSenderId: \"891470607365\",\n    appId: \"1:891470607365:web:c8791fd0fe9d58526b586c\",\n    measurementId: \"G-MGDN3L6V8R\"\n});\nconst auth = firebase.auth();\nconst db = firebase.firestore();\n\n\nfunction App() {\n\n  const [user, setuser] = useState(()=> auth.currentUser)\n  const [initializing, setinitializing] = useState(true)\n  useEffect(() => {\n    const unsuscribe = auth.onAuthStateChanged( user => {\n      if ( user ){\n        setuser( user );\n      }else{\n        setuser( null );\n      }\n\n      if ( initializing ){\n        setinitializing( false );\n      }\n    })\n\n    return unsuscribe;\n  })\n  const signInWithGoogle =async() => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    auth.useDeviceLanguage();\n\n    try{\n      await auth.signInWithPopup(provider);\n    }catch(error){\n      console.log( error );\n    }\n  };\n\n  const signInWithGithub = async() => {\n    const provider = new firebase.auth.GithubAuthProvider();\n    auth.useDeviceLanguage();\n\n    try {\n      await auth.signInWithPopup(provider);\n    }catch( error ){\n      console.log( error )\n    }\n  }\n\n  const signInWithFacebook = async() => {\n      const provider = new firebase.auth.FacebookAuthProvider();\n      auth.useDeviceLanguage();\n\n      try{\n        await auth.signInWithPopup(provider);\n      }catch( error ){\n        console.log( error );\n      }\n  }\n\n  const signOut = async() => {\n    try{\n      await firebase.auth().signOut();\n    }catch(error){\n      console.log( error.message );\n    }\n  };\n\n\n  if( initializing ) return 'Loading...';\n\n  return (\n    <div className=\"App\">\n      {user \n      \n      ? \n      \n      <>\n        <Button  onClick={signOut}>Cerrar Sesión</Button>\n        <Channel user={user} db={db} />\n      </>\n      \n      : \n      <Fragment>\n        <Button  onClick={signInWithGoogle}>Sign Up with Google</Button>\n        <Button  onClick={signInWithGithub}>Sign Up with GitHub</Button>\n        <Button  onClick={signInWithFacebook}>Sign Up with Facebook</Button>\n      </Fragment>\n      }\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}